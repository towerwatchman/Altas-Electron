const { useState, useEffect } = window.React;

const Settings = () => {
  const [selected, setSelected] = useState('Interface');
  const [isMaximized, setIsMaximized] = useState(false);

  useEffect(() => {
    window.electronAPI.onWindowStateChanged((state) => {
      setIsMaximized(state === 'maximized');
    });
  }, []);

  const items = [
    { name: 'Interface', icon: 'interface_icon', path: '<PathGeometry Figures="M17,3C18.1046,3,19,3.89543,19,5V8H21V5C21,2.79086,19.2091,1,17,1H5C2.79086,1,1,2.79086,1,5V19C1,21.2091,2.79086,23,5,23H17C19.2091,23,21,21.2091,21,19V16H19V19C19,20.1046,18.1046,21,17,21H5C3.89543,21,3,20.1046,3,19V5C3,3.89543,3.89543,3,5,3H17ZM16,8C16,7.44772,15.5523,7,15,7H7C6.44772,7,6,7.44772,6,8V16C6,16.5523,6.44772,17,7,17H15C15.5523,17,16,16.5523,16,16V8ZM14,9H8V15H14V9Z"/>' },
    { name: 'Library', icon: 'library_icon', path: '<PathGeometry Figures="M2,4C2,2.89543,2.89543,2,4,2H10C11.1046,2,12,2.89543,12,4V20C12,21.1046,11.1046,22,10,22H4C2.89543,22,2,21.1046,2,20V4ZM4,4V20H10V4H4ZM14,4C14,2.89543,14.8954,2,16,2H22C23.1046,2,24,2.89543,24,4V12C24,13.1046,23.1046,14,22,14H16C14.8954,14,14,13.1046,14,12V4ZM16,4V12H22V4H16ZM14,16C14,14.8954,14.8954,14,16,14H22C23.1046,14,24,14.8954,24,16V20C24,21.1046,23.1046,22,22,22H16C14.8954,22,14,21.1046,14,20V16ZM16,16V20H22V16H16Z"/>' },
    { name: 'Platforms', icon: 'store_icon', path: '<PathGeometry Figures="M5 3 A 1.0001 1.0001 0 1 0 5 5L19 5 A 1.0001 1.0001 0 1 0 19 3L5 3 z M 4.7207031 7C4.2897031 7 3.9074844 7.2745938 3.7714844 7.6835938L2.0507812 12.845703C2.0167813 12.947703 2 13.055109 2 13.162109L2 14C2 14.552 2.448 15 3 15L3 20 A 1.0001 1.0001 0 0 0 4 21L12 21 A 1.0001 1.0001 0 0 0 13 20L13 15L19 15L19 20 A 1.0001 1.0001 0 1 0 21 20L21 15C21.552 15 22 14.552 22 14L22 13.162109C22 13.055109 21.983219 12.947703 21.949219 12.845703L20.228516 7.6835938C20.092516 7.2745938 19.710297 7 19.279297 7L14 7C13.447 7 13 7.448 13 8L13 10L15 10L15 8L19.279297 8L21 13.162109L21 14L3 14L3 13.162109L4.7207031 8L9 8L9 10L11 10L11 8C11 7.448 10.553 7 10 7L4.7207031 7 z"/>' },
    { name: 'Emulators', icon: 'controller_icon', path: '<PathGeometry Figures="M2.58594,8.30664c-0.239,-0.415 -0.326,-0.9417 -0.087,-1.3567L4.09375,4.33789c0.239,-0.415 0.7384,-0.6023 1.1914,-0.4473L6.92969,4.45703c0.666,0.547 1.4254,0.9791 2.2461,1.2895L9.50977,4.03125c0.092,-0.47 0.5015,-0.8086 0.9805,-0.8086h3.0195c0.479,0 0.8884,0.3386 0.9804,0.8086l0.334,1.71484c0.8204,-0.3103 1.5799,-0.7424 2.2461,-1.2895l1.6445,-0.5664c0.453,-0.155 0.9524,0.0323 1.1914,0.4473l1.5078,2.61289c0.239,0.415 0.152,0.9417 -0.087,1.3567l-1.3184,1.14648c0.068,0.4213 0.1128,0.8503 0.1128,1.291c0,0.4407 -0.044,0.8697 -0.1128,1.291l1.3184,1.1465c0.239,0.415 0.326,0.9417 0.087,1.3567l-1.5078,2.6128c-0.239,0.415 -0.7384,0.6023 -1.1914,0.4473l-1.6445,-0.5664c-0.666,-0.547 -1.4254,-0.979 -2.2461,-1.2895l-0.334,1.7148c-0.092,0.47 -0.5015,0.8086 -0.9804,0.8086h-3.0195c-0.479,0 -0.8884,-0.3386 -0.9805,-0.8086l-0.334,-1.7148c-0.8207,0.3105 -1.5801,0.7426 -2.2461,1.2895l-1.6445,0.5664c-0.453,0.155 -0.9524,-0.0323 -1.1914,-0.4473l-1.5078,-2.6128c-0.239,-0.415 -0.152,-0.9417 0.087,-1.3567l1.3184,-1.1465c-0.068,-0.4213 -0.1128,-0.8503 -0.1128,-1.291c0,-0.4407 0.044,-0.8697 0.1128,-1.291l-1.3184,-1.14648zm8.9043,3.69348c0,-2.209 1.791,-4 4,-4c2.209,0 4,1.791 4,4c0,2.209 -1.791,4 -4,4c-2.209,0 -4,-1.791 -4,-4z"/>' },
    { name: 'Appearance', icon: 'appearance_icon', path: '<PathGeometry Figures="M8.19531,2.06836c-0.315,-0.104 -0.663,0.104 -0.767,0.419l-0.69531,2.09375c-0.418,0.023 -0.83,0.094 -1.228,0.212l-1.943,-1.125c-0.294,-0.17 -0.663,-0.059 -0.833,0.235l-1.5,2.59814c-0.17,0.294 -0.059,0.663 0.235,0.833l1.943,1.125c-0.118,0.398 -0.189,0.81 -0.212,1.228l-2.09375,0.69531c-0.315,0.104 -0.523,0.452 -0.419,0.767l1,3c0.104,0.315 0.452,0.523 0.767,0.419l2.09375,-0.69531c0.398,0.118 0.81,0.189 1.228,0.212l1.125,1.943c0.17,0.294 0.539,0.405 0.833,0.235l2.598,-1.5c0.294,-0.17 0.405,-0.539 0.235,-0.833l-1.125,-1.943c0.118,-0.398 0.189,-0.81 0.212,-1.228l2.09375,-0.69531c0.315,-0.104 0.523,-0.452 0.419,-0.767l-1,-3c-0.104,-0.315 -0.452,-0.523 -0.767,-0.419l-2.09375,0.69531c-0.398,-0.118 -0.81,-0.189 -1.228,-0.212l-1.125,-1.943c-0.17,-0.294 -0.539,-0.405 -0.833,-0.235l-2.598,1.5c-0.294,0.17 -0.405,0.539 -0.235,0.833l1.125,1.943c-0.023,0.418 -0.094,0.83 -0.212,1.228l-2.09375,0.69531c-0.315,0.104 -0.523,0.452 -0.419,0.767l1,3c0.104,0.315 0.452,0.523 0.767,0.419l2.09375,-0.69531c0.418,-0.023 0.83,-0.094 1.228,-0.212l1.943,1.125c0.294,0.17 0.663,0.059 0.833,-0.235l1.5,-2.598c0.17,-0.294 0.059,-0.663 -0.235,-0.833l-1.943,-1.125c0.118,-0.398 0.189,-0.81 0.212,-1.228l2.09375,-0.69531c0.315,-0.104 0.523,-0.452 0.419,-0.767l-1,-3c-0.104,-0.315 -0.452,-0.523 -0.767,-0.419l-2.09375,0.69531c-0.418,0.023 -0.83,0.094 -1.228,0.212l-1.943,-1.125c-0.294,-0.17 -0.663,-0.059 -0.833,0.235l-1.5,2.598c-0.17,0.294 -0.059,0.663 0.235,0.833l1.943,1.125c0.023,0.418 0.094,0.83 0.212,1.228l-0.69531,2.09375c-0.104,0.315 0.104,0.663 0.419,0.767l3,1c0.315,0.104 0.663,-0.104 0.767,-0.419l0.69531,-2.09375c0.418,-0.023 0.83,-0.094 1.228,-0.212l1.943,1.125c0.294,0.17 0.663,0.059 0.833,-0.235l1.5,-2.598c0.17,-0.294 0.059,-0.663 -0.235,-0.833l-1.943,-1.125c0.118,-0.398 0.189,-0.81 0.212,-1.228l2.09375,-0.69531c0.315,-0.104 0.523,-0.452 0.419,-0.767l-1,-3c-0.104,-0.315 -0.452,-0.523 -0.767,-0.419l-2.09375,0.69531c-0.418,0.023 -0.83,0.094 -1.228,0.212l-1.943,-1.125c-0.294,-0.17 -0.663,-0.059 -0.833,0.235l-1.5,2.598c-0.17,0.294 -0.059,0.663 0.235,0.833l1.943,1.125c0.023,0.418 0.094,0.83 0.212,1.228l-0.69531,2.09375c-0.104,0.315 0.104,0.663 0.419,0.767l3,1c0.315,0.104 0.663,-0.104 0.767,-0.419l0.69531,-2.09375c0.418,-0.023 0.83,-0.094 1.228,-0.212l1.943,1.125c0.294,0.17 0.663,0.059 0.833,-0.235l1.5,-2.598c0.17,-0.294 0.059,-0.663 -0.235,-0.833l-1.943,-1.125c-0.012,-0.199 -0.027,-0.399 -0.049,-0.598c-0.048,-0.432 -0.139,-0.858 -0.269,-1.273l2.09375,-0.69531c0.315,-0.104 0.523,-0.452 0.419,-0.767l-1,-3c-0.104,-0.315 -0.452,-0.523 -0.767,-0.419l-2.09375,0.69531c-0.13,-0.415 -0.307,-0.816 -0.527,-1.201l1.943,-1.125c0.294,-0.17 0.405,-0.539 0.235,-0.833l-1.5,-2.598c-0.17,-0.294 -0.539,-0.405 -0.833,-0.235l-1.943,1.125c-0.398,-0.118 -0.81,-0.189 -1.228,-0.212l-0.69531,-2.09375zM12,8c2.209,0,4,1.791,4,4c0,2.209,-1.791,4,-4,4c-2.209,0,-4,-1.791,-4,-4c0,-2.209,1.791,-4,4,-4z"/>' },
    { name: 'Metadata', icon: 'database_icon', path: '<PathGeometry Figures="M12,2c5.514,0 10,1.566 10,3.5c0,1.933 -4.486,3.5 -10,3.5c-5.514,0 -10,-1.567 -10,-3.5c0,-1.934 4.486,-3.5 10,-3.5zM2,6.5c0,0.456 0.848,0.912 2.34,1.328c-0.936,0.416 -1.824,0.936 -2.34,1.672c0,0 -0.001,0 -0.001,0c0,1.934 4.486,3.5 10,3.5c5.514,0 10,-1.566 10,-3.5c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-1.934 -4.486,-3.5 -10,-3.5c-5.514,0 -10,1.566 -10,3.5c0,0.456 0.848,0.912 2.34,1.328c-0.936,0.416 -1.824,0.936 -2.34,1.672c0,0 -0.001,0 -0.001,0c0,1.934 4.486,3.5 10,3.5c5.514,0 10,-1.566 10,-3.5c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-1.934 -4.486,-3.5 -10,-3.5c-5.514,0 -10,1.566 -10,3.5z"/>' },
    { name: 'Search', icon: 'search_icon', path: '<PathGeometry Figures="M15.5,14l-0.8,0c1,1.2 1.6,2.8 1.6,4.5c0,4.1 -3.4,7.5 -7.5,7.5c-4.1,0 -7.5,-3.4 -7.5,-7.5c0,-4.1 3.4,-7.5 7.5,-7.5c1.7,0 3.3,0.6 4.5,1.6l0,0.8l5.3,5.3c0.2,0.2 0.2,0.5 0,0.7l-0.7,0.7c-0.2,0.2 -0.5,0.2 -0.7,0l-5.3,-5.3zm-7,0c-2.5,0 -4.5,-2 -4.5,-4.5c0,-2.5 2,-4.5 4.5,-4.5c2.5,0 4.5,2 4.5,4.5c0,2.5 -2,4.5 -4.5,4.5z"/>' },
    { name: 'Downloads', icon: 'import_icon', path: '<PathGeometry Figures="M12,2c0.6,0 1,0.4 1,1v8.6l2.3,-2.3c0.4,-0.4 1,-0.4 1.4,0c0.4,0.4 0.4,1 0,1.4l-4,4c-0.4,0.4 -1,0.4 -1.4,0l-4,-4c-0.4,-0.4 -0.4,-1 0,-1.4c0.4,-0.4 1,-0.4 1.4,0l2.3,2.3V3c0,-0.6 0.4,-1 1,-1zm-8,13c-0.6,0 -1,0.4 -1,1v4c0,0.6 0.4,1 1,1h16c0.6,0 1,-0.4 1,-1v-4c0,-0.6 -0.4,-1 -1,-1c-0.6,0 -1,0.4 -1,1v3h-14v-3c0,-0.6 -0.4,-1 -1,-1z"/>' },
    { name: 'Notifications', icon: 'notification_icon', path: '<PathGeometry Figures="M10,20c0,1.1 0.9,2 2,2c1.1,0 2,-0.9 2,-2h-4zm8,-2v1h-12v-1c0,-0.6 0.4,-1 1,-1h10c0.6,0 1,0.4 1,1zm-14,-3c-0.6,0 -1,0.4 -1,1c0,0.6 0.4,1 1,1h16c0.6,0 1,-0.4 1,-1c0,-0.6 -0.4,-1 -1,-1H4zm0,-4c-0.6,0 -1,0.4 -1,1c0,0.6 0.4,1 1,1h16c0.6,0 1,-0.4 1,-1c0,-0.6 -0.4,-1 -1,-1H4zm0,-4c-0.6,0 -1,0.4 -1,1c0,0.6 0.4,1 1,1h16c0.6,0 1,-0.4 1,-1c0,-0.6 -0.4,-1 -1,-1H4z"/>' },
    { name: 'Storage', icon: 'database_icon', path: '<PathGeometry Figures="M12,2c5.514,0 10,1.566 10,3.5c0,1.933 -4.486,3.5 -10,3.5c-5.514,0 -10,-1.567 -10,-3.5c0,-1.934 4.486,-3.5 10,-3.5zM2,6.5c0,0.456 0.848,0.912 2.34,1.328c-0.936,0.416 -1.824,0.936 -2.34,1.672c0,0 -0.001,0 -0.001,0c0,1.934 4.486,3.5 10,3.5c5.514,0 10,-1.566 10,-3.5c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-1.934 -4.486,-3.5 -10,-3.5c-5.514,0 -10,1.566 -10,3.5c0,0.456 0.848,0.912 2.34,1.328c-0.936,0.416 -1.824,0.936 -2.34,1.672c0,0 -0.001,0 -0.001,0c0,1.934 4.486,3.5 10,3.5c5.514,0 10,-1.566 10,-3.5c0,-0.736 -0.888,-1.256 -2.34,-1.672c1.492,-0.416 2.34,-0.872 2.34,-1.328c0,-1.934 -4.486,-3.5 -10,-3.5c-5.514,0 -10,1.566 -10,3.5z"/>' },
  ];

  const renderContent = () => {
    switch (selected) {
      case 'Interface':
        return <window.Interface />;
      case 'Library':
        return <window.Library />;
      case 'Platforms':
        return <window.Platforms />;
      case 'Emulators':
        return <window.Emulators />;
      case 'Appearance':
        return <window.Appearance />;
      case 'Metadata':
        return <window.Metadata />;
      default:
        return <div className="p-4 text-text">Select a settings category</div>;
    }
  };

  return (
    <div className="flex flex-col h-screen font-sans text-[13px] bg-transparent">
      {/* Window Controls */}
      <div className="absolute top-0 right-0 flex items-center h-[30px] -webkit-app-region-no-drag z-50">
        <button
          onClick={() => window.electronAPI.minimizeWindow()}
          className="w-8 h-8 flex items-center justify-center bg-transparent hover:bg-hover"
        >
          <svg className="w-3 h-3 text-text" viewBox="0 0 45 45" fill="currentColor" dangerouslySetInnerHTML={{ __html: '<RectangleGeometry RadiusX="0" RadiusY="0" Rect="5.887,12.208,35.992,2.015" />' }} />
        </button>
        <button
          onClick={() => window.electronAPI.maximizeWindow()}
          className="w-8 h-8 flex items-center justify-center bg-transparent hover:bg-hover"
        >
          <svg className="w-3 h-3 text-text" viewBox="0 0 45 45" fill="currentColor" dangerouslySetInnerHTML={{ __html: isMaximized ? '<PathGeometry Figures="M7,16H3v-5h4v-4h5v4h-4v5zm6,0v4h4v4h-5v-4h4v-5h-4v-4h5v4h-4zm11,5v-4h-4v-5h4v4h5v-4h4v5h-4v4h-5zm-6,0v5h-4v4h-5v-4h4v-5h5v4h4v-4h-4z"/>' : '<RectangleGeometry RadiusX="0" RadiusY="0" Rect="5,5,35,35" />' }} />
        </button>
        <button
          onClick={() => window.electronAPI.closeWindow()}
          className="w-8 h-8 flex items-center justify-center bg-transparent hover:bg-redExit"
        >
          <svg className="w-3 h-3 text-text" viewBox="0 0 45 45" fill="currentColor" dangerouslySetInnerHTML={{ __html: '<PathGeometry Figures="M6.34375,6.34375 L38.65625,38.65625 M38.65625,6.34375 L6.34375,38.65625" />' }} />
        </button>
      </div>
      {/* Main Content */}
      <div className="flex flex-1">
        {/* Settings Sidebar */}
        <div className="w-[180px] bg-primary h-full overflow-y-auto border-r border-border">
          <div className="text-center text-text font-bold text-lg mt-4 mb-2">ATLAS SETTINGS</div>
          <ul>
            {items.map((item) => (
              <li
                key={item.name}
                className={`p-4 cursor-pointer hover:bg-selected flex items-center ${selected === item.name ? 'bg-selected' : ''} ${item.disabled ? 'opacity-50 cursor-not-allowed' : ''}`}
                onClick={() => !item.disabled && setSelected(item.name)}
              >
                <svg className="w-6 h-6 text-text mr-2" viewBox="0 0 24 24" fill="currentColor" dangerouslySetInnerHTML={{ __html: item.path.replace('<PathGeometry Figures="', '').replace('"/>', '') }} />
                {item.name}
              </li>
            ))}
          </ul>
        </div>
        {/* Settings Content */}
        <div className="flex-1 bg-secondary p-4 overflow-y-auto">
          <h2 className="text-2xl font-bold mb-4 text-aliceblue">SETTINGS</h2>
          {renderContent()}
        </div>
      </div>
    </div>
  );
};

const root = window.ReactDOM.createRoot(document.getElementById('root'));
root.render(<Settings />);